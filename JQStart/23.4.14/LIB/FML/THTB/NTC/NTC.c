

#include "NTC.h"
float  ntc2temp_3950(double kRes)
{
	 
	 double a[5];
if(kRes>32.7547){
	a[4]=0.000000012591587;
a[3]=- 0.000011454008499;
a[2]=0.003914965017182 ;
a[1]=- 0.669400756844723 ;
a[0]=17.351326653526900  ;
	

 }else if(kRes>3.5882){
	 
	 	a[4]=0.000180742469032;
a[3]=- 0.015919063015274 ;
a[2]=0.530810541573533  ;
a[1]= -8.936658503893310;
a[0]=75.127302444341800  ;
  
 }
 else if(kRes>0.2922)
 {
	 

a[4]=2.573054562237170;
a[3]=- 23.630870911553300;
a[2]=80.617099111164200 ;
a[1]= -134.323934465704000;
a[0]=160.818034806652000  ;
	 
	 
	 
 }else{
	 
 
	 
	 a[4]=29.710113988600000;
a[3]=- 26.734360295300000;
a[2]=9012.174365605750000 ;
a[1]= -1632.446577198040000;
a[0]=272.742201405940000  ;
	 
	 
 }
	
	
		return   JHAL_polynomial(4,a,kRes);
 
	
}

//返回值单位kΩ
double    temp2ntc_3950(float temp)
{
	 
	 double a[5];
if(temp<0){
	a[4]=0.000101662967037;
a[3]=0.002898664994960;
a[2]=0.114853458848881  ;
a[1]=- 1.281943042630680  ;
a[0]=33.222447111991000   ;
	

 }else if(temp<50){
	 
	 	a[4]=0.000003522589781 ;
a[3]=- 0.000585981891959 ;
a[2]=0.041595591428017  ;
a[1]= -1.636578374440560  ;
a[0]=32.700314812026500   ;
  
 }
 else if(temp<130)
 {
	 

a[4]=0.000000093413114  ;
a[3]=- 0.000042008475880  ;
a[2]=0.007298882209463   ;
a[1]= -0.592908923166551  ;
a[0]=19.640955265649300   ;
	 
	 
	 
 }else{
	 
 
	 
	 a[4]=0.000000003433359 ;
a[3]=- 0.000002670256743 ;
a[2]=0.000797517341428  ;
a[1]= -0.109554728989702 ;
a[0]=5.942053161095220   ;
	 
	 
 }
	
	
		return   JHAL_polynomial(4,a,temp);
 
	
}


/*NTC型号 CMFA103F3500HANT*/

/*****************************************************
Name:NTC
Function:NTC温度读取
type:
input:

                	AD_VOL_10K
-30	142299.5463	       269
-20	80585.80802	       452
-10	47652.09443	       710
0.000 	29282.7915	  1043
10.000 	18624.29671	  1431
20.000 	12216.74808	  1844
25.000 	10000.000 	  2048
30.000 	8239.726264	  2246
40.000 	5698.938485	  2609
50.000 	4032.598923	  2919
60.000 	2913.356199	  3172
70.000 	2145.019683	  3373
80.000 	1606.937746	  3529
90.000 	1223.136242	  3650
100.000 	944.7203022	3742
110.000 	739.5829545	3814
120.000 	586.2447617	3869


output:
*****************************************************/

//TODO 未校验  参考上表  这个应该是 12位adc匹配10k下ad码值 不是电阻值
float  ntc2temp_CMFA103F3500HANT(uint32_t kRes)
{
    float  temp;
    if(kRes <= 269)
    {
        temp = -30;
    }
    else if(kRes<=452)
    {
        temp = -30 + ((float)(kRes-269)/(float)(452-269))*10;
    }
    else if(kRes<=710)
    {
        temp = -20 + ((float)(kRes-452)/(float)(710-452))*10;
    }
    else if(kRes<=1043)
    {
        temp = -10 + ((float)(kRes-710)/(float)(1043-710))*10;
    }
    else if(kRes<=1431)
    {
        temp = 0 + ((float)(kRes-1043)/(float)(1431-1043))*10;
    }
    else if(kRes<=1844)
    {
        temp = 10 + ((float)(kRes-1431)/(float)(1844-1431))*10;
    }
    else if(kRes<=2048)
    {
        temp = 20 + ((float)(kRes-1431)/(float)(2048-1431))*5;
    }
    else if(kRes<=2246)
    {
        temp = 25 + ((float)(kRes-2048)/(float)(2246-2048))*5;
    }
    else if(kRes<=2609)
    {
        temp = 30 + ((float)(kRes-2246)/(float)(2609-2246))*10;
    }
    else if(kRes<=2919)
    {
        temp = 40 + ((float)(kRes-2609)/(float)(2919-2609))*10;
    }
    else if(kRes<=3172)
    {
        temp = 50 + ((float)(kRes-2919)/(float)(3172-2919))*10;
    }
    else if(kRes<=3373)
    {
        temp = 60 + ((float)(kRes-3172)/(float)(3373-3172))*10;
    }
    else if(kRes<=3529)
    {
        temp = 70 + ((float)(kRes-3373)/(float)(3529-3373))*10;
    }
    else
    {
        temp = 80;
    }
    return temp;
}


/*------------------Jyen--------------------------Jyen-----------------------*/
/*******************************************************************************
*@ 函数功能或简介:TDK   b57332v5103f360-10K 的电阻转温度
  * @输入参数:   kRes 电阻 k
  * @返 回 值: 摄氏度
  * @备注:  
  *R/T No.  
T (°C) B25/100 = 3455 K  
RT/R25 α (%/K) RT/R25 α (%/K)  
-55.0 44.605 5.9  
-50.0 33.281 5.8  
-45.0 25.044 5.6  
-40.0 19.003 5.4  
-35.0 14.536 5.3  
-30.0 11.206 5.1  
-25.0 8.7041 5.0  
-20.0 6.8104 4.8  
-15.0 5.3665 4.7  
-10.0 4.2576 4.6  
-5.0 3.4001 4.4  
0.0 2.7326 4.3  
5.0 2.2096 4.2  
10.0 1.7973 4.1  
15.0 1.4703 4.0  
20.0 1.2093 3.9 
25.0 1.0000 3.7  
30.0 0.83113 3.6  
35.0 0.69418 3.6 
40.0 0.58255 3.5  
45.0 0.49112 3.4  
50.0 0.41587 3.3  
55.0 0.35365 3.2  
60.0 0.30197 3.1  
65.0 0.25888 3.0  
70.0 0.22278 3.0  
75.0 0.19243 2.9  
80.0 0.16681 2.8 
85.0 0.1451 2.8 0 
90.0 0.12663 2.7 
95.0 0.11088 2.6  
100.0 0.097381 2.6  
105.0 0.085788 2.5 
110.0 0.075795 2.4 
115.0 0.067155 2.4  
120.0 0.059663 2.3  
125.0 0.053146 2.3  
130.0 0.047463 2.2  
135.0 0.042493 2.2  
140.0 0.038134 2.1  
145.0 0.034302 2.1  
150.0 0.030925 2.1  

  *
  ******************************************************************************
  *
  *------------------Jyen-------------------------Jyen-------------------------*/

float  ntc2temp_b57332v5103f360( float kRes)
{
    float temp;
//-55 - 0  y = (19.6841233816)ln(x) + 63.7561660526
    if(kRes>27.326f)
    {
        temp= -19.6841233816*log(kRes)+63.7561660526;
    }
//0-55   多项式y = -0.0059145344 x3 + 0.3692409506 x2 - 8.6044856735 x + 79.7111300808
//			对数 y = (26.8923106296)ln(x) + 87.7223034341
    else if(kRes>3.5365f)
    {
//这里常温下用多项式的  计算效率更高 误差(±1与官方参考)也在接受范围内
//temp= -26.8923106296*log(kRes)+87.7223034341 ;
        double a[]= {79.7111300808, - 8.6044856735,0.3692409506,  -0.0059145344} ;
        temp= JHAL_polynomial(3,a,kRes);


    }
//55-150  y = (39.0002242336)ln(x) + 100.9126433403
    else
    {
        temp= -39.0002242336*log(kRes)+100.9126433403;
    }

    return temp;
}


/*------------------Jyen--------------------------Jyen-----------------------*/
/*******************************************************************************
*@ 函数功能或简介:南京时恒电子科技有限公司  MF52A103F3950 的电阻转温度
  * @输入参数:   kRes 电阻 k
  * @返 回 值: 摄氏度
  * @备注: 无
  *
  *
  ******************************************************************************
  *
  *------------------Jyen-------------------------Jyen-------------------------*/

float  ntc2temp_MF52A103F3950( float kRes)
{
    float temp;
//-55 - -10   y = -16.8361943308 ln(x) + 55.6634280829
    if(kRes>53.28f)
    {
        temp= -16.8361943308*log(kRes)+55.6634280829;
    }
//-10-50 y = -22.1955580864 ln(x) + 76.8090750251
    else if(kRes>3.588f)
    {
        temp= -22.1955580864*log(kRes)+ 76.8090750251;


    }
//50-125  y = -31.3292017281 ln(x) + 87.5436186654
    else
    {
        temp= -31.3292017281*log(kRes)+ 87.5436186654;
    }

    return temp;
}


