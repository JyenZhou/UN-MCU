#ifndef _BSP_SPI_AD7606_H
#define _BSP_SPI_AD7606_H
#include "JHAL.h"
#ifdef __CplusPlus
extern "C" {
#endif

extern SPI_HandleTypeDef hspi3;
#define AD7606_SPI hspi3


/* SPI总线的SCK、MOSI、MISO 在 spi_bus.c中配置  */

#define AD7606_RCC_CS 		  __HAL_RCC_GPIOB_CLK_ENABLE()
#define AD7606_RCC_RESET 	__HAL_RCC_GPIOG_CLK_ENABLE()
#define AD7606_RCC_RANGE 	__HAL_RCC_GPIOD_CLK_ENABLE()
#define AD7606_RCC_CONVST 	 __HAL_RCC_GPIOG_CLK_ENABLE()
#define AD7606_RCC_BUSY 	 __HAL_RCC_GPIOG_CLK_ENABLE()
#define AD7606_RCC_OS2 	__HAL_RCC_GPIOG_CLK_ENABLE()
#define AD7606_RCC_OS1 	__HAL_RCC_GPIOG_CLK_ENABLE()
#define AD7606_RCC_OS0 	__HAL_RCC_GPIOG_CLK_ENABLE()

/* CSN片选 */   //PB12
#define AD7606_PORT_CS		GPIOB	
#define AD7606_PIN_CS		GPIO_PIN_15
/* RESET */    //PA4

#define AD7606_PORT_RESET	ADG7608_RESET_GPIO_Port
#define AD7606_PIN_RESET	ADG7608_RESET_Pin
/* RANGE */		//PA8
#define AD7606_PORT_RANGE ADG7608_RAGE_GPIO_Port	
#define AD7606_PIN_RANGE 	ADG7608_RAGE_Pin
/* CONVST */		//PB15

#define AD7606_PORT_CONVST	ADG7608_CONVST_GPIO_Port
#define AD7606_PIN_CONVST 	ADG7608_CONVST_Pin

/* BUSY */  //PA6

#define AD7606_PORT_BUSY 	ADG7608_BUSY_GPIO_Port
#define AD7606_PIN_BUSY 	 ADG7608_BUSY_Pin

/* OS2 */  //PA13

#define AD7606_PORT_OS2 	ADG7608_OS2_GPIO_Port
#define AD7606_PIN_OS2 	ADG7608_OS2_Pin

/* OS1 */  //PA15

#define AD7606_PORT_OS1 	ADG7608_OS1_GPIO_Port
#define AD7606_PIN_OS1 	ADG7608_OS1_Pin

/* OS0 */  //PA14

#define AD7606_PORT_OS0 	ADG7608_OS0_GPIO_Port
#define AD7606_PIN_OS0 	ADG7608_OS0_Pin


/*SCK 软件*/
#define AD7606_RCC_SCK 	__HAL_RCC_GPIOB_CLK_ENABLE()
#define AD7606_PORT_SCK 	GPIOB
#define AD7606_PIN_SCK 	GPIO_PIN_13
/*MISO 软件*/
#define AD7606_RCC_MISO 	__HAL_RCC_GPIOE_CLK_ENABLE()
#define AD7606_PORT_MISO 	GPIOB
#define AD7606_PIN_MISO 	GPIO_PIN_14
/*MOSI 软件*/
#define AD7606_RCC_MOSI 	__HAL_RCC_GPIOE_CLK_ENABLE()
#define AD7606_PORT_MOSI 	GPIOB
#define AD7606_PIN_MOSI 	GPIO_PIN_15




#define CH_NUM	8	/* 8通道 */

/* 片选 */
#define AD7606_CS_0()						 HAL_GPIO_WritePin(AD7606_PORT_CS, AD7606_PIN_CS,GPIO_PIN_RESET)
#define AD7606_CS_1()						 HAL_GPIO_WritePin(AD7606_PORT_CS, AD7606_PIN_CS,GPIO_PIN_SET)

/* 设置量程 */
#define AD7606_RANGE_5V()					HAL_GPIO_WritePin(AD7606_PORT_RANGE, AD7606_PIN_RANGE,GPIO_PIN_RESET)
#define AD7606_RANGE_10V()					HAL_GPIO_WritePin(AD7606_PORT_RANGE, AD7606_PIN_RANGE,GPIO_PIN_SET)	//置1

/* 复位引脚 */
#define AD7606_RESET_LOW()					HAL_GPIO_WritePin(AD7606_PORT_RESET, AD7606_PIN_RESET,GPIO_PIN_RESET)
#define AD7606_RESET_HIGH()					HAL_GPIO_WritePin(AD7606_PORT_RESET, AD7606_PIN_RESET,GPIO_PIN_SET)

/* 起始信号 */
#define	AD7606_CONVST_LOW()					HAL_GPIO_WritePin(AD7606_PORT_CONVST, AD7606_PIN_CONVST,GPIO_PIN_RESET)
#define	AD7606_CONVST_HIGH()				HAL_GPIO_WritePin(AD7606_PORT_CONVST, AD7606_PIN_CONVST,GPIO_PIN_SET)

/* OS */
#define AD7606_OS2_0() 						  HAL_GPIO_WritePin(AD7606_PORT_OS2, AD7606_PIN_OS2,GPIO_PIN_RESET)
#define AD7606_OS2_1() 						  HAL_GPIO_WritePin(AD7606_PORT_OS2, AD7606_PIN_OS2,GPIO_PIN_SET)
#define AD7606_OS1_0() 						  HAL_GPIO_WritePin(AD7606_PORT_OS1, AD7606_PIN_OS1,GPIO_PIN_RESET)
#define AD7606_OS1_1() 						  HAL_GPIO_WritePin(AD7606_PORT_OS1, AD7606_PIN_OS1,GPIO_PIN_SET)
#define AD7606_OS0_0() 						  HAL_GPIO_WritePin(AD7606_PORT_OS0, AD7606_PIN_OS0,GPIO_PIN_RESET)
#define AD7606_OS0_1() 						  HAL_GPIO_WritePin(AD7606_PORT_OS0, AD7606_PIN_OS0,GPIO_PIN_SET)

typedef struct
{
	uint8_t Range;
}AD7606_T;

void AD7606_Reset(void);		
void AD7606_SetInputRange(uint8_t _ucRange);	/* 设置AD7606量程 */
void spi_InitAD7606(uint8 g_tAD7606_Range );		/* 初始化AD7606 */
void AD7606_Scan(void); 		/* 此函数代码按照时序编写 */
int32_t AD7606_ReadAdc(uint8_t _ch);
void AD7606_SetOS(uint8_t _ucMode);
void test_AD7606main(void);
extern AD7606_T g_tAD7606;
extern volatile int32_t AD7608_ADValue[];
 
#ifdef CplusPlus
}
#endif

#endif


